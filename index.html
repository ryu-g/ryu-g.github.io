<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="utf-8">
	<title>javascriptの練習</title>
	<script src="lib/jquery-3.1.1.min.js"></script>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div id="hello">
		<button class="button_add"  id="addText">addText</button>
		<button class="button_add"  id="addFirst">addFirst</button>
		<button class="button_add"  id="addLast">addLast</button>
		<button class="button_remove"  id="removeLast">remove first</button>
		<button class="button_remove"  id="removeFirst">remove last</button>
		<button class="button_reset"  id="reset">reset</button>
	</div>
		<textarea id="target" placeholder="type any message and add it!!"></textarea>
	<div class="posts"></div>
	<script>
		$(document).ready(function(){
	//イベントハンドラの登録などのコード
});
		var count=1;
		$(function(){
		function createElement(count){
			var block = $("<div class=\"post\"></div>");
			$(block).append('<div> <p>おだし'+count+'号</p>　<button class="remove">remove</button> <button class="edit">edit</button></div>');
			return block;
		}
		function sendMessage(text){
			var block = $("<div class=\"post\"></div>");
			$(block).append('<div> <p>'+text+'</p><button class="remove">remove</button> <button class="edit">edit</button></div>');
			return block;
		}
		$('#addFirst').click(function(){
			$('.posts').prepend(createElement(count));
			count++;
		});
		$('#addLast').click(function(){
			$('.posts').append(createElement(count));
			count++;
		});
		$('#removeFirst').click(function(){
			$('.posts .post:last').remove();
		});
		$('#removeLast').click(function(){
			$('.posts .post:first').remove();
		});
		$('#reset').click(function(){
			count=1;
			$('.posts').empty();
		})
		$(document).on("click",'.remove',function(){//特定の要素の削除
			$(this).parent().remove();
		});
		//----------------------
		$(document).on("click",'.edit',function(){//特定の要素の編集
			var txt = $(this).parent().children('p').text();
			$(this).parent().children('p').html('<input type="text" value="'+txt+'">');
			$(this).parent().children('p').append('<button class="save">save</button>');
		});
		$(document).on("click",'.save',function(){
			var txt = $(this).parent().children('input').val();
			$(this).parent().html(txt);
		});
		$(document).on("click",'#addText',function(){//任意のテキスト入力
			var txt = $("textarea,target").val();
			if(txt!=''){$('.posts').append(sendMessage(txt));}
			$("#target").attr('placeholder','ここに文字を入れてからそのボタンを押せ!!');
		})
	})

</script>
</body>
</html>